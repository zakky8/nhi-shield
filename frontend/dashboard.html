<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NHI Shield â€” Non-Human Identity Manager</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Syne:wght@400;500;600;700;800&display=swap');

  :root {
    --bg: #060a0f;
    --surface: #0d1420;
    --surface2: #111827;
    --border: #1e2d3d;
    --border2: #253445;
    --text: #cbd5e1;
    --text-dim: #64748b;
    --text-bright: #f1f5f9;
    --critical: #ff3b5c;
    --high: #ff7a29;
    --medium: #f5c842;
    --low: #22d3a2;
    --accent: #5b8def;
    --accent2: #7c5cbf;
    --mono: 'JetBrains Mono', monospace;
    --sans: 'Syne', sans-serif;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: var(--mono);
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* â”€â”€ GRID BACKGROUND â”€â”€ */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(91,141,239,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(91,141,239,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  /* â”€â”€ SIDEBAR â”€â”€ */
  .sidebar {
    position: fixed;
    left: 0; top: 0; bottom: 0;
    width: 220px;
    background: var(--surface);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    z-index: 100;
    padding: 0;
  }

  .logo {
    padding: 24px 20px;
    border-bottom: 1px solid var(--border);
  }

  .logo-text {
    font-family: var(--sans);
    font-size: 18px;
    font-weight: 800;
    letter-spacing: -0.5px;
    color: var(--text-bright);
  }

  .logo-text span { color: var(--accent); }

  .logo-sub {
    font-size: 9px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--text-dim);
    margin-top: 2px;
  }

  .nav { padding: 12px 0; flex: 1; }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 20px;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-dim);
    cursor: pointer;
    transition: all 0.15s;
    border-left: 2px solid transparent;
    text-decoration: none;
    letter-spacing: 0.5px;
  }

  .nav-item:hover { color: var(--text); background: rgba(91,141,239,0.05); }

  .nav-item.active {
    color: var(--accent);
    border-left-color: var(--accent);
    background: rgba(91,141,239,0.08);
  }

  .nav-icon { width: 16px; height: 16px; opacity: 0.8; }

  .nav-badge {
    margin-left: auto;
    background: var(--critical);
    color: white;
    font-size: 9px;
    font-weight: 700;
    padding: 1px 6px;
    border-radius: 10px;
  }

  .sidebar-footer {
    padding: 16px 20px;
    border-top: 1px solid var(--border);
  }

  .user-info { font-size: 10px; color: var(--text-dim); }
  .user-email { color: var(--text); font-size: 11px; margin-bottom: 2px; }

  /* â”€â”€ MAIN CONTENT â”€â”€ */
  .main {
    margin-left: 220px;
    min-height: 100vh;
    position: relative;
    z-index: 1;
  }

  .topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 28px;
    border-bottom: 1px solid var(--border);
    background: rgba(6,10,15,0.8);
    backdrop-filter: blur(10px);
    position: sticky;
    top: 0;
    z-index: 50;
  }

  .page-title {
    font-family: var(--sans);
    font-size: 16px;
    font-weight: 700;
    color: var(--text-bright);
    letter-spacing: -0.3px;
  }

  .page-subtitle { font-size: 11px; color: var(--text-dim); margin-top: 1px; }

  .topbar-right { display: flex; align-items: center; gap: 12px; }

  .scan-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 7px 14px;
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 6px;
    font-family: var(--mono);
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s;
    letter-spacing: 0.5px;
  }

  .scan-btn:hover { background: #4a7de0; transform: translateY(-1px); }

  .pulse-dot {
    width: 7px; height: 7px;
    background: var(--low);
    border-radius: 50%;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(34,211,162,0.4); }
    50% { opacity: 0.8; box-shadow: 0 0 0 5px rgba(34,211,162,0); }
  }

  /* â”€â”€ PAGE â”€â”€ */
  .page { padding: 24px 28px; display: none; }
  .page.active { display: block; }

  /* â”€â”€ STAT CARDS â”€â”€ */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 14px;
    margin-bottom: 24px;
  }

  .stat-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 18px 20px;
    position: relative;
    overflow: hidden;
    transition: border-color 0.2s;
  }

  .stat-card:hover { border-color: var(--border2); }

  .stat-card::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
  }

  .stat-card.danger::after { background: var(--critical); }
  .stat-card.warning::after { background: var(--high); }
  .stat-card.info::after { background: var(--accent); }
  .stat-card.ok::after { background: var(--low); }

  .stat-label {
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-dim);
    margin-bottom: 10px;
  }

  .stat-value {
    font-family: var(--sans);
    font-size: 32px;
    font-weight: 800;
    color: var(--text-bright);
    line-height: 1;
  }

  .stat-change {
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 6px;
  }

  .stat-change.up { color: var(--critical); }
  .stat-change.down { color: var(--low); }

  /* â”€â”€ CONTENT GRID â”€â”€ */
  .content-grid {
    display: grid;
    grid-template-columns: 1fr 380px;
    gap: 14px;
  }

  .content-grid-3 {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 14px;
  }

  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
  }

  .card-header {
    padding: 14px 18px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .card-title {
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--text);
  }

  .card-body { padding: 16px 18px; }

  /* â”€â”€ RISK BADGE â”€â”€ */
  .risk-badge {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 3px 10px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
  }

  .risk-badge.CRITICAL { background: rgba(255,59,92,0.15); color: var(--critical); border: 1px solid rgba(255,59,92,0.3); }
  .risk-badge.HIGH     { background: rgba(255,122,41,0.15); color: var(--high); border: 1px solid rgba(255,122,41,0.3); }
  .risk-badge.MEDIUM   { background: rgba(245,200,66,0.15); color: var(--medium); border: 1px solid rgba(245,200,66,0.3); }
  .risk-badge.LOW      { background: rgba(34,211,162,0.15); color: var(--low); border: 1px solid rgba(34,211,162,0.3); }

  .risk-dot { width: 5px; height: 5px; border-radius: 50%; }
  .CRITICAL .risk-dot { background: var(--critical); }
  .HIGH .risk-dot     { background: var(--high); }
  .MEDIUM .risk-dot   { background: var(--medium); }
  .LOW .risk-dot      { background: var(--low); }

  /* â”€â”€ TABLE â”€â”€ */
  .data-table { width: 100%; border-collapse: collapse; }
  .data-table th {
    font-size: 9px;
    font-weight: 600;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-dim);
    padding: 10px 14px;
    text-align: left;
    border-bottom: 1px solid var(--border);
  }
  .data-table td {
    padding: 12px 14px;
    font-size: 11px;
    border-bottom: 1px solid rgba(30,45,61,0.5);
    color: var(--text);
    vertical-align: middle;
  }
  .data-table tr:last-child td { border-bottom: none; }
  .data-table tr:hover td { background: rgba(91,141,239,0.04); }

  .identity-name { font-weight: 600; color: var(--text-bright); font-size: 12px; }
  .identity-meta { font-size: 10px; color: var(--text-dim); margin-top: 2px; }

  .platform-chip {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 3px 8px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 4px;
    font-size: 10px;
    color: var(--text);
  }

  .score-bar {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .score-track {
    width: 60px; height: 4px;
    background: var(--border2);
    border-radius: 2px;
    overflow: hidden;
  }

  .score-fill { height: 100%; border-radius: 2px; transition: width 0.5s; }
  .score-fill.CRITICAL { background: var(--critical); }
  .score-fill.HIGH     { background: var(--high); }
  .score-fill.MEDIUM   { background: var(--medium); }
  .score-fill.LOW      { background: var(--low); }

  .score-num { font-size: 12px; font-weight: 600; }
  .score-num.CRITICAL { color: var(--critical); }
  .score-num.HIGH     { color: var(--high); }
  .score-num.MEDIUM   { color: var(--medium); }
  .score-num.LOW      { color: var(--low); }

  /* â”€â”€ ALERT ITEMS â”€â”€ */
  .alert-item {
    padding: 12px 0;
    border-bottom: 1px solid rgba(30,45,61,0.5);
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }
  .alert-item:last-child { border-bottom: none; }

  .alert-dot { width: 8px; height: 8px; border-radius: 50%; margin-top: 4px; flex-shrink: 0; }
  .alert-content { flex: 1; }
  .alert-title { font-size: 11px; font-weight: 600; color: var(--text-bright); }
  .alert-meta { font-size: 10px; color: var(--text-dim); margin-top: 3px; }
  .alert-time { font-size: 10px; color: var(--text-dim); white-space: nowrap; }

  /* â”€â”€ DISTRIBUTION BARS â”€â”€ */
  .dist-item { margin-bottom: 12px; }
  .dist-label {
    display: flex;
    justify-content: space-between;
    font-size: 10px;
    margin-bottom: 5px;
    color: var(--text);
  }
  .dist-track {
    height: 6px;
    background: var(--border2);
    border-radius: 3px;
    overflow: hidden;
  }
  .dist-fill { height: 100%; border-radius: 3px; transition: width 0.8s cubic-bezier(0.4,0,0.2,1); }

  /* â”€â”€ PLATFORM CARDS â”€â”€ */
  .platform-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 10px;
    transition: border-color 0.2s;
  }
  .platform-card:hover { border-color: var(--border2); }
  .platform-card.connected { border-left: 2px solid var(--low); }
  .platform-card.disconnected { border-left: 2px solid var(--border2); opacity: 0.7; }

  .platform-info { display: flex; align-items: center; gap: 12px; }
  .platform-icon { font-size: 20px; }
  .platform-name { font-weight: 600; font-size: 13px; color: var(--text-bright); }
  .platform-status-text { font-size: 10px; color: var(--text-dim); margin-top: 2px; }

  .status-chip {
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.5px;
  }
  .status-chip.online { background: rgba(34,211,162,0.15); color: var(--low); }
  .status-chip.offline { background: rgba(100,116,139,0.15); color: var(--text-dim); }

  /* â”€â”€ COMPLIANCE GAUGE â”€â”€ */
  .gauge-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }

  .gauge-svg { width: 140px; height: 80px; }

  .gauge-value {
    font-family: var(--sans);
    font-size: 36px;
    font-weight: 800;
    color: var(--text-bright);
    margin-top: -10px;
  }

  .gauge-label { font-size: 10px; color: var(--text-dim); letter-spacing: 1.5px; text-transform: uppercase; }

  /* â”€â”€ FILTER BAR â”€â”€ */
  .filter-bar {
    display: flex;
    gap: 10px;
    margin-bottom: 16px;
    flex-wrap: wrap;
  }

  .filter-select, .filter-input {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: var(--mono);
    font-size: 11px;
    padding: 7px 12px;
    border-radius: 6px;
    outline: none;
    cursor: pointer;
    transition: border-color 0.15s;
  }

  .filter-select:hover, .filter-input:focus { border-color: var(--border2); }
  .filter-input { flex: 1; min-width: 200px; }
  .filter-input::placeholder { color: var(--text-dim); }

  /* â”€â”€ EMPTY STATE â”€â”€ */
  .empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px;
    color: var(--text-dim);
    font-size: 12px;
    gap: 8px;
  }

  .empty-icon { font-size: 32px; opacity: 0.4; }

  /* â”€â”€ ACTION BTN â”€â”€ */
  .action-btn {
    padding: 5px 12px;
    background: transparent;
    border: 1px solid var(--border2);
    color: var(--text-dim);
    font-family: var(--mono);
    font-size: 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.15s;
  }
  .action-btn:hover { border-color: var(--accent); color: var(--accent); }
  .action-btn.danger:hover { border-color: var(--critical); color: var(--critical); }
  .action-btn.resolve { background: rgba(34,211,162,0.1); border-color: var(--low); color: var(--low); }

  /* â”€â”€ SCROLLBAR â”€â”€ */
  ::-webkit-scrollbar { width: 5px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }

  /* â”€â”€ LOADING â”€â”€ */
  .skeleton {
    background: linear-gradient(90deg, var(--surface) 25%, var(--surface2) 50%, var(--surface) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 4px;
  }

  @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

  /* â”€â”€ RESPONSIVE â”€â”€ */
  @media (max-width: 1100px) {
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .content-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<!-- SIDEBAR -->
<nav class="sidebar">
  <div class="logo">
    <div class="logo-text">NHI <span>Shield</span></div>
    <div class="logo-sub">Identity Security Platform</div>
  </div>
  <div class="nav">
    <div class="nav-item active" onclick="navigate('dashboard')">
      <svg class="nav-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
        <rect x="1" y="1" width="6" height="6" rx="1"/><rect x="9" y="1" width="6" height="6" rx="1"/>
        <rect x="1" y="9" width="6" height="6" rx="1"/><rect x="9" y="9" width="6" height="6" rx="1"/>
      </svg>
      Dashboard
    </div>
    <div class="nav-item" onclick="navigate('identities')">
      <svg class="nav-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
        <circle cx="8" cy="5" r="3"/><path d="M2 14c0-3.3 2.7-6 6-6s6 2.7 6 6"/>
      </svg>
      Identities
    </div>
    <div class="nav-item" onclick="navigate('graph')">
      <svg class="nav-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
        <circle cx="8" cy="8" r="2"/><circle cx="3" cy="3" r="1.5"/><circle cx="13" cy="3" r="1.5"/>
        <circle cx="3" cy="13" r="1.5"/><circle cx="13" cy="13" r="1.5"/>
        <line x1="8" y1="6" x2="4" y2="4"/><line x1="8" y1="6" x2="12" y2="4"/>
        <line x1="8" y1="10" x2="4" y2="12"/><line x1="8" y1="10" x2="12" y2="12"/>
      </svg>
      Identity Graph
    </div>
    <div class="nav-item" onclick="navigate('alerts')">
      <svg class="nav-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M8 2l1.5 3h3l-2.5 2 1 3L8 8.5 5 10l1-3-2.5-2h3L8 2z"/>
      </svg>
      Alerts
      <span class="nav-badge">3</span>
    </div>
    <div class="nav-item" onclick="navigate('integrations')">
      <svg class="nav-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
        <rect x="1" y="6" width="5" height="4" rx="1"/><rect x="10" y="6" width="5" height="4" rx="1"/>
        <line x1="6" y1="8" x2="10" y2="8"/>
      </svg>
      Integrations
    </div>
    <div class="nav-item" onclick="navigate('reports')">
      <svg class="nav-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
        <rect x="2" y="1" width="12" height="14" rx="1"/><line x1="5" y1="5" x2="11" y2="5"/>
        <line x1="5" y1="8" x2="11" y2="8"/><line x1="5" y1="11" x2="8" y2="11"/>
      </svg>
      Reports
    </div>
  </div>
  <div class="sidebar-footer">
    <div class="user-email">admin@testorg.com</div>
    <div class="user-info">Administrator Â· TestOrg</div>
  </div>
</nav>

<!-- MAIN CONTENT -->
<main class="main">

  <!-- TOP BAR -->
  <div class="topbar">
    <div>
      <div class="page-title" id="pageTitle">Dashboard</div>
      <div class="page-subtitle" id="pageSubtitle">Real-time identity security overview</div>
    </div>
    <div class="topbar-right">
      <div style="display:flex;align-items:center;gap:6px;font-size:10px;color:var(--text-dim)">
        <div class="pulse-dot"></div>
        Live Â· Last scan 2 min ago
      </div>
      <button class="scan-btn" onclick="triggerScan()">
        <svg width="12" height="12" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M13 5A6 6 0 1 0 14 8"/><path d="M14 2v4h-4"/>
        </svg>
        Scan Now
      </button>
    </div>
  </div>

  <!-- DASHBOARD PAGE -->
  <div class="page active" id="page-dashboard">
    <div class="stats-grid">
      <div class="stat-card info">
        <div class="stat-label">Total Identities</div>
        <div class="stat-value">10</div>
        <div class="stat-change up">+3 since last week</div>
      </div>
      <div class="stat-card danger">
        <div class="stat-label">Critical Risk</div>
        <div class="stat-value" style="color:var(--critical)">2</div>
        <div class="stat-change up">â†‘ Needs immediate attention</div>
      </div>
      <div class="stat-card warning">
        <div class="stat-label">Active Alerts</div>
        <div class="stat-value" style="color:var(--high)">3</div>
        <div class="stat-change">1 critical, 2 high</div>
      </div>
      <div class="stat-card ok">
        <div class="stat-label">Compliance Score</div>
        <div class="stat-value" style="color:var(--low)">62</div>
        <div class="stat-change down">â†“ 5 dormant identities</div>
      </div>
    </div>

    <div class="content-grid">
      <!-- LEFT: Top Risk Identities -->
      <div class="card">
        <div class="card-header">
          <span class="card-title">Highest Risk Identities</span>
          <button class="action-btn" onclick="navigate('identities')">View All â†’</button>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Identity</th>
              <th>Platform</th>
              <th>Risk Score</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="topRiskTable"></tbody>
        </table>
      </div>

      <!-- RIGHT COLUMN -->
      <div style="display:flex;flex-direction:column;gap:14px;">

        <!-- Risk Distribution -->
        <div class="card">
          <div class="card-header"><span class="card-title">Risk Distribution</span></div>
          <div class="card-body">
            <div id="riskDistribution"></div>
          </div>
        </div>

        <!-- Active Alerts -->
        <div class="card">
          <div class="card-header">
            <span class="card-title">Recent Alerts</span>
            <button class="action-btn" onclick="navigate('alerts')">All Alerts â†’</button>
          </div>
          <div class="card-body" id="alertsFeed"></div>
        </div>

      </div>
    </div>
  </div>

  <!-- IDENTITIES PAGE -->
  <div class="page" id="page-identities">
    <div class="filter-bar">
      <input class="filter-input" type="text" placeholder="Search by name..." oninput="filterIdentities(this.value)" />
      <select class="filter-select" onchange="filterByPlatform(this.value)">
        <option value="">All Platforms</option>
        <option>github</option><option>aws</option><option>openai</option><option>slack</option>
      </select>
      <select class="filter-select" onchange="filterByRisk(this.value)">
        <option value="">All Risk Levels</option>
        <option>CRITICAL</option><option>HIGH</option><option>MEDIUM</option><option>LOW</option>
      </select>
      <select class="filter-select" onchange="filterByStatus(this.value)">
        <option value="">All Status</option>
        <option value="true">Active</option><option value="false">Inactive</option>
      </select>
    </div>
    <div class="card">
      <table class="data-table">
        <thead>
          <tr>
            <th>Identity</th>
            <th>Platform</th>
            <th>Type</th>
            <th>Risk Score</th>
            <th>Last Used</th>
            <th>Owner</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="identitiesTable"></tbody>
      </table>
    </div>
  </div>

  <!-- GRAPH PAGE -->
  <div class="page" id="page-graph">
    <div class="card" style="height:calc(100vh - 140px);">
      <div class="card-header">
        <span class="card-title">Identity Relationship Graph</span>
        <span style="font-size:10px;color:var(--text-dim)">Nodes colored by risk Â· Click to inspect</span>
      </div>
      <canvas id="graphCanvas" style="width:100%;height:calc(100% - 50px);"></canvas>
    </div>
  </div>

  <!-- ALERTS PAGE -->
  <div class="page" id="page-alerts">
    <div class="filter-bar">
      <select class="filter-select" onchange="filterAlerts(this.value)">
        <option value="">All Severities</option>
        <option>CRITICAL</option><option>HIGH</option><option>MEDIUM</option><option>LOW</option>
      </select>
      <select class="filter-select" onchange="filterAlertStatus(this.value)">
        <option value="">All Status</option>
        <option value="false">Open</option><option value="true">Resolved</option>
      </select>
    </div>
    <div id="alertsListContainer"></div>
  </div>

  <!-- INTEGRATIONS PAGE -->
  <div class="page" id="page-integrations">
    <div id="integrationsContainer"></div>
  </div>

  <!-- REPORTS PAGE -->
  <div class="page" id="page-reports">
    <div class="content-grid">
      <div class="card">
        <div class="card-header"><span class="card-title">Security Compliance Report</span></div>
        <div class="card-body" id="reportContent"></div>
      </div>
      <div>
        <div class="card" style="margin-bottom:14px;">
          <div class="card-header"><span class="card-title">Compliance Score</span></div>
          <div class="gauge-container">
            <svg class="gauge-svg" viewBox="0 0 140 80">
              <path d="M 10 75 A 60 60 0 0 1 130 75" fill="none" stroke="#1e2d3d" stroke-width="12" stroke-linecap="round"/>
              <path id="gaugeArc" d="M 10 75 A 60 60 0 0 1 130 75" fill="none" stroke="#22d3a2" stroke-width="12" stroke-linecap="round" stroke-dasharray="189" stroke-dashoffset="72"/>
            </svg>
            <div class="gauge-value">62</div>
            <div class="gauge-label">Compliance Score</div>
          </div>
        </div>
        <div class="card">
          <div class="card-header"><span class="card-title">Quick Stats</span></div>
          <div class="card-body" id="quickStats"></div>
        </div>
      </div>
    </div>
  </div>

</main>

<script>
// â”€â”€ Mock Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const IDENTITIES = [
  { id:1, name:'github-ci-deploy-bot',       platform:'github', type:'github_app',    score:12, level:'LOW',      lastUsed:'1 day ago',   owner:'admin@testorg.com', active:true },
  { id:2, name:'lambda-data-processor-role', platform:'aws',    type:'iam_role',       score:82, level:'CRITICAL', lastUsed:'5 days ago',  owner:null,               active:true },
  { id:3, name:'prod-gpt4-integration-key',  platform:'openai', type:'api_key',        score:58, level:'HIGH',     lastUsed:'2 hrs ago',   owner:'dev@testorg.com',  active:true },
  { id:4, name:'helpdesk-support-bot',        platform:'slack',  type:'slack_app',     score:15, level:'LOW',      lastUsed:'30 min ago',  owner:'ops@testorg.com',  active:true },
  { id:5, name:'old-backup-service-account',  platform:'aws',    type:'service_account',score:68, level:'HIGH',    lastUsed:'210 days ago',owner:null,               active:true },
  { id:6, name:'prod-deploy-key-2022',        platform:'github', type:'deploy_key',    score:62, level:'HIGH',     lastUsed:'95 days ago', owner:null,               active:true },
  { id:7, name:'workspace-admin-automation',  platform:'slack',  type:'slack_app',     score:79, level:'CRITICAL', lastUsed:'3 days ago',  owner:'unknown',          active:true },
  { id:8, name:'email-sender-lambda-role',    platform:'aws',    type:'lambda_role',   score:18, level:'LOW',      lastUsed:'4 hrs ago',   owner:'devops@testorg.com',active:true },
  { id:9, name:'old-chatbot-test-key',        platform:'openai', type:'api_key',       score:65, level:'HIGH',     lastUsed:'150 days ago',owner:null,               active:true },
  { id:10,name:'dependabot-security-updates', platform:'github', type:'github_app',    score:10, level:'LOW',      lastUsed:'6 hrs ago',   owner:'admin@testorg.com',active:true },
];

const ALERTS = [
  { id:1, severity:'CRITICAL', type:'UNUSUAL_TIME',           identity:'workspace-admin-automation', platform:'slack',  desc:'Admin bot accessed user list at 3:14 AM â€” outside all normal windows', time:'2 hrs ago',  resolved:false },
  { id:2, severity:'HIGH',     type:'VOLUME_SPIKE',           identity:'old-backup-service-account', platform:'aws',    desc:'Dormant account made 847 S3 calls in 1 hour â€” 500x normal rate',       time:'6 hrs ago',  resolved:false },
  { id:3, severity:'HIGH',     type:'SENSITIVE_RESOURCE_ACCESS',identity:'prod-gpt4-integration-key',platform:'openai', desc:'Access from new region (Eastern Europe) â€” first time in 8 months',      time:'1 day ago',  resolved:false },
];

const INTEGRATIONS = [
  { platform:'GitHub', icon:'ğŸ™', status:'connected', identities:4, lastSync:'2 min ago' },
  { platform:'AWS',    icon:'â˜ï¸',  status:'connected', identities:3, lastSync:'2 min ago' },
  { platform:'OpenAI', icon:'ğŸ¤–', status:'connected', identities:2, lastSync:'2 min ago' },
  { platform:'Slack',  icon:'ğŸ’¬', status:'connected', identities:2, lastSync:'2 min ago' },
  { platform:'Google', icon:'ğŸ”', status:'disconnected', identities:0, lastSync:'â€”' },
  { platform:'Azure',  icon:'ğŸ”·', status:'disconnected', identities:0, lastSync:'â€”' },
];

let filteredIdentities = [...IDENTITIES];
let filteredAlerts = [...ALERTS];

// â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function navigate(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

  document.getElementById(`page-${page}`).classList.add('active');

  const navItems = document.querySelectorAll('.nav-item');
  navItems.forEach(item => {
    if (item.getAttribute('onclick')?.includes(`'${page}'`)) {
      item.classList.add('active');
    }
  });

  const titles = {
    dashboard: ['Dashboard', 'Real-time identity security overview'],
    identities: ['Identities', `${IDENTITIES.length} non-human identities discovered`],
    graph: ['Identity Graph', 'Relationship visualization'],
    alerts: ['Alerts', `${ALERTS.filter(a => !a.resolved).length} open alerts`],
    integrations: ['Integrations', 'Connected platform management'],
    reports: ['Reports', 'Compliance & audit trail'],
  };

  document.getElementById('pageTitle').textContent = titles[page][0];
  document.getElementById('pageSubtitle').textContent = titles[page][1];

  if (page === 'graph') renderGraph();
  if (page === 'alerts') renderAlertsList(filteredAlerts);
  if (page === 'integrations') renderIntegrations();
  if (page === 'reports') renderReports();
}

// â”€â”€ Risk helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function riskColor(level) {
  return { CRITICAL:'var(--critical)', HIGH:'var(--high)', MEDIUM:'var(--medium)', LOW:'var(--low)' }[level] || 'var(--text-dim)';
}

function badgeHTML(level) {
  return `<span class="risk-badge ${level}"><span class="risk-dot"></span>${level}</span>`;
}

function scoreHTML(score, level) {
  return `<div class="score-bar">
    <div class="score-track"><div class="score-fill ${level}" style="width:${score}%"></div></div>
    <span class="score-num ${level}">${score}</span>
  </div>`;
}

function platformBadge(platform) {
  const icons = { github:'ğŸ™', aws:'â˜ï¸', openai:'ğŸ¤–', slack:'ğŸ’¬', google:'ğŸ”' };
  return `<span class="platform-chip">${icons[platform] || 'âš™ï¸'} ${platform}</span>`;
}

// â”€â”€ Dashboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderDashboard() {
  // Top risk identities
  const sorted = [...IDENTITIES].sort((a,b) => b.score - a.score).slice(0,5);
  document.getElementById('topRiskTable').innerHTML = sorted.map(id => `
    <tr>
      <td>
        <div class="identity-name">${id.name}</div>
        <div class="identity-meta">${id.type.replace(/_/g,' ')}</div>
      </td>
      <td>${platformBadge(id.platform)}</td>
      <td>${scoreHTML(id.score, id.level)}</td>
      <td>
        <button class="action-btn" onclick="navigate('identities')">View</button>
        ${id.level === 'CRITICAL' || id.level === 'HIGH' ? `<button class="action-btn danger" style="margin-left:4px">Offboard</button>` : ''}
      </td>
    </tr>
  `).join('');

  // Risk distribution
  const dist = { CRITICAL: 0, HIGH: 0, MEDIUM: 0, LOW: 0 };
  IDENTITIES.forEach(id => dist[id.level]++);
  const total = IDENTITIES.length;

  document.getElementById('riskDistribution').innerHTML = Object.entries(dist).map(([level, count]) => `
    <div class="dist-item">
      <div class="dist-label">
        <span>${level}</span>
        <span style="color:${riskColor(level)}">${count} / ${total}</span>
      </div>
      <div class="dist-track">
        <div class="dist-fill" style="width:${(count/total*100).toFixed(0)}%;background:${riskColor(level)}"></div>
      </div>
    </div>
  `).join('');

  // Recent alerts
  const dotColors = { CRITICAL:'var(--critical)', HIGH:'var(--high)', MEDIUM:'var(--medium)', LOW:'var(--low)' };
  document.getElementById('alertsFeed').innerHTML = ALERTS.slice(0,3).map(a => `
    <div class="alert-item">
      <div class="alert-dot" style="background:${dotColors[a.severity]}"></div>
      <div class="alert-content">
        <div class="alert-title">${a.type.replace(/_/g, ' ')}</div>
        <div class="alert-meta">${a.identity} Â· ${a.platform}</div>
      </div>
      <div class="alert-time">${a.time}</div>
    </div>
  `).join('');
}

// â”€â”€ Identities â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderIdentities(data) {
  document.getElementById('identitiesTable').innerHTML = data.length === 0
    ? `<tr><td colspan="7"><div class="empty-state"><div class="empty-icon">ğŸ”</div><div>No identities match your filters</div></div></td></tr>`
    : data.map(id => `
      <tr>
        <td>
          <div class="identity-name">${id.name}</div>
          <div class="identity-meta">${id.active ? 'â— Active' : 'â—‹ Inactive'}</div>
        </td>
        <td>${platformBadge(id.platform)}</td>
        <td><span style="font-size:10px;color:var(--text-dim)">${id.type.replace(/_/g,' ')}</span></td>
        <td>${scoreHTML(id.score, id.level)}</td>
        <td style="font-size:10px;color:var(--text-dim)">${id.lastUsed}</td>
        <td style="font-size:10px;${!id.owner ? 'color:var(--critical)' : 'color:var(--text-dim)'}">${id.owner || 'âš  Unassigned'}</td>
        <td style="display:flex;gap:4px;">
          <button class="action-btn">View</button>
          ${(id.level === 'CRITICAL' || id.level === 'HIGH') ? `<button class="action-btn danger">Offboard</button>` : ''}
        </td>
      </tr>
    `).join('');
}

function filterIdentities(v) {
  filteredIdentities = IDENTITIES.filter(id => id.name.includes(v.toLowerCase()));
  applyFilters();
}
function filterByPlatform(v) {
  filteredIdentities = v ? IDENTITIES.filter(id => id.platform === v) : [...IDENTITIES];
  applyFilters();
}
function filterByRisk(v) {
  filteredIdentities = v ? IDENTITIES.filter(id => id.level === v) : [...IDENTITIES];
  applyFilters();
}
function filterByStatus(v) {
  filteredIdentities = v !== '' ? IDENTITIES.filter(id => String(id.active) === v) : [...IDENTITIES];
  applyFilters();
}
function applyFilters() { renderIdentities(filteredIdentities); }

// â”€â”€ Graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderGraph() {
  const canvas = document.getElementById('graphCanvas');
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  ctx.scale(dpr, dpr);
  const W = rect.width, H = rect.height;

  // Simple force-directed layout simulation
  const nodes = IDENTITIES.map((id, i) => {
    const angle = (i / IDENTITIES.length) * Math.PI * 2;
    const r = Math.min(W, H) * 0.3;
    return {
      ...id,
      x: W/2 + r * Math.cos(angle) + (Math.random()-0.5)*60,
      y: H/2 + r * Math.sin(angle) + (Math.random()-0.5)*60,
      vx: 0, vy: 0
    };
  });

  const edges = [
    [0,5],[0,9],[1,4],[1,7],[2,3],[6,3],[4,1],[2,6]
  ];

  const colors = { CRITICAL:'#ff3b5c', HIGH:'#ff7a29', MEDIUM:'#f5c842', LOW:'#22d3a2' };

  function draw() {
    ctx.clearRect(0, 0, W, H);

    // Draw edges
    ctx.strokeStyle = 'rgba(30,45,61,0.8)';
    ctx.lineWidth = 1;
    edges.forEach(([a,b]) => {
      if (!nodes[a] || !nodes[b]) return;
      ctx.beginPath();
      ctx.moveTo(nodes[a].x, nodes[a].y);
      ctx.lineTo(nodes[b].x, nodes[b].y);
      ctx.stroke();
    });

    // Draw nodes
    nodes.forEach(node => {
      const color = colors[node.level];
      const r = 10 + (node.score / 100) * 12;

      // Glow
      const grd = ctx.createRadialGradient(node.x, node.y, r*0.5, node.x, node.y, r*2);
      grd.addColorStop(0, color + '40');
      grd.addColorStop(1, 'transparent');
      ctx.fillStyle = grd;
      ctx.beginPath();
      ctx.arc(node.x, node.y, r*2, 0, Math.PI*2);
      ctx.fill();

      // Node circle
      ctx.beginPath();
      ctx.arc(node.x, node.y, r, 0, Math.PI*2);
      ctx.fillStyle = color + '33';
      ctx.fill();
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // Label
      ctx.fillStyle = '#cbd5e1';
      ctx.font = `10px 'JetBrains Mono', monospace`;
      ctx.textAlign = 'center';
      const label = node.name.length > 20 ? node.name.slice(0,18)+'â€¦' : node.name;
      ctx.fillText(label, node.x, node.y + r + 14);
    });
  }

  // Simple physics simulation
  let frame = 0;
  function tick() {
    if (frame++ < 120) {
      nodes.forEach((n, i) => {
        // Repel from other nodes
        nodes.forEach((m, j) => {
          if (i === j) return;
          const dx = n.x - m.x, dy = n.y - m.y;
          const dist = Math.sqrt(dx*dx + dy*dy) || 1;
          const force = 2000 / (dist*dist);
          n.vx += (dx/dist)*force;
          n.vy += (dy/dist)*force;
        });
        // Attract to center
        n.vx += (W/2 - n.x) * 0.001;
        n.vy += (H/2 - n.y) * 0.001;
        // Damping
        n.vx *= 0.9; n.vy *= 0.9;
        n.x += n.vx; n.y += n.vy;
      });
      draw();
      requestAnimationFrame(tick);
    } else {
      draw();
    }
  }
  tick();
}

// â”€â”€ Alerts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAlertsList(data) {
  const severityColors = { CRITICAL:'var(--critical)', HIGH:'var(--high)', MEDIUM:'var(--medium)', LOW:'var(--low)' };
  document.getElementById('alertsListContainer').innerHTML = data.map(a => `
    <div class="card" style="margin-bottom:10px;">
      <div class="card-body" style="display:flex;gap:14px;align-items:flex-start;">
        <div style="flex-shrink:0;">${badgeHTML(a.severity)}</div>
        <div style="flex:1;">
          <div style="font-size:12px;font-weight:600;color:var(--text-bright);margin-bottom:4px">${a.type.replace(/_/g,' ')}</div>
          <div style="font-size:11px;color:var(--text-dim);margin-bottom:8px">${a.desc}</div>
          <div style="display:flex;gap:8px;align-items:center;">
            ${platformBadge(a.platform)}
            <span style="font-size:10px;color:var(--text-dim)">${a.identity}</span>
            <span style="font-size:10px;color:var(--text-dim);margin-left:auto">${a.time}</span>
          </div>
        </div>
        ${!a.resolved ? `<button class="action-btn resolve" onclick="resolveAlert(${a.id})">Resolve</button>` : `<span style="font-size:10px;color:var(--low)">âœ“ Resolved</span>`}
      </div>
    </div>
  `).join('') || '<div class="empty-state"><div class="empty-icon">âœ“</div><div>No alerts match your filters</div></div>';
}

function resolveAlert(id) {
  const alert = ALERTS.find(a => a.id === id);
  if (alert) {
    alert.resolved = true;
    renderAlertsList(filteredAlerts);
    document.querySelector('.nav-badge').textContent = ALERTS.filter(a => !a.resolved).length;
  }
}

function filterAlerts(v) {
  filteredAlerts = v ? ALERTS.filter(a => a.severity === v) : [...ALERTS];
  renderAlertsList(filteredAlerts);
}

function filterAlertStatus(v) {
  filteredAlerts = v !== '' ? ALERTS.filter(a => String(a.resolved) === v) : [...ALERTS];
  renderAlertsList(filteredAlerts);
}

// â”€â”€ Integrations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderIntegrations() {
  document.getElementById('integrationsContainer').innerHTML = INTEGRATIONS.map(int => `
    <div class="platform-card ${int.status}">
      <div class="platform-info">
        <div class="platform-icon">${int.icon}</div>
        <div>
          <div class="platform-name">${int.platform}</div>
          <div class="platform-status-text">
            ${int.status === 'connected' ? `${int.identities} identities Â· Last sync: ${int.lastSync}` : 'Not connected'}
          </div>
        </div>
      </div>
      <div style="display:flex;gap:8px;align-items:center;">
        <span class="status-chip ${int.status === 'connected' ? 'online' : 'offline'}">
          ${int.status === 'connected' ? 'Connected' : 'Offline'}
        </span>
        ${int.status === 'connected'
          ? `<button class="action-btn" onclick="alert('Scan triggered for ${int.platform}')">Scan</button>
             <button class="action-btn danger">Disconnect</button>`
          : `<button class="scan-btn" style="font-size:10px;padding:5px 12px" onclick="alert('Connect ${int.platform}')">Connect</button>`
        }
      </div>
    </div>
  `).join('');
}

// â”€â”€ Reports â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderReports() {
  const dist = { CRITICAL: 2, HIGH: 4, MEDIUM: 0, LOW: 4 };
  document.getElementById('reportContent').innerHTML = `
    <table class="data-table">
      <tbody>
        <tr><td style="color:var(--text-dim)">Total Identities</td><td style="font-weight:600;color:var(--text-bright)">10</td></tr>
        <tr><td style="color:var(--text-dim)">Active</td><td style="font-weight:600;color:var(--text-bright)">10</td></tr>
        <tr><td style="color:var(--text-dim)">Critical Risk</td><td style="font-weight:600;color:var(--critical)">2</td></tr>
        <tr><td style="color:var(--text-dim)">High Risk</td><td style="font-weight:600;color:var(--high)">4</td></tr>
        <tr><td style="color:var(--text-dim)">Unowned Identities</td><td style="font-weight:600;color:var(--high)">5</td></tr>
        <tr><td style="color:var(--text-dim)">Dormant (90d)</td><td style="font-weight:600;color:var(--medium)">3</td></tr>
        <tr><td style="color:var(--text-dim)">Connected Platforms</td><td style="font-weight:600;color:var(--text-bright)">4</td></tr>
        <tr><td style="color:var(--text-dim)">Open Alerts</td><td style="font-weight:600;color:var(--critical)">3</td></tr>
      </tbody>
    </table>
  `;

  document.getElementById('quickStats').innerHTML = `
    <div class="dist-item">
      <div class="dist-label"><span>CRITICAL</span><span style="color:var(--critical)">2</span></div>
      <div class="dist-track"><div class="dist-fill" style="width:20%;background:var(--critical)"></div></div>
    </div>
    <div class="dist-item">
      <div class="dist-label"><span>HIGH</span><span style="color:var(--high)">4</span></div>
      <div class="dist-track"><div class="dist-fill" style="width:40%;background:var(--high)"></div></div>
    </div>
    <div class="dist-item">
      <div class="dist-label"><span>MEDIUM</span><span style="color:var(--medium)">0</span></div>
      <div class="dist-track"><div class="dist-fill" style="width:0%;background:var(--medium)"></div></div>
    </div>
    <div class="dist-item">
      <div class="dist-label"><span>LOW</span><span style="color:var(--low)">4</span></div>
      <div class="dist-track"><div class="dist-fill" style="width:40%;background:var(--low)"></div></div>
    </div>
  `;
}

// â”€â”€ Scan â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function triggerScan() {
  const btn = document.querySelector('.scan-btn');
  btn.innerHTML = `<span style="animation:spin 1s linear infinite;display:inline-block">âŸ³</span> Scanning...`;
  btn.disabled = true;
  setTimeout(() => {
    btn.innerHTML = `<svg width="12" height="12" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 5A6 6 0 1 0 14 8"/><path d="M14 2v4h-4"/></svg> Scan Now`;
    btn.disabled = false;
  }, 3000);
}

// â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('DOMContentLoaded', () => {
  renderDashboard();
  renderIdentities(IDENTITIES);
});
</script>
</body>
</html>
